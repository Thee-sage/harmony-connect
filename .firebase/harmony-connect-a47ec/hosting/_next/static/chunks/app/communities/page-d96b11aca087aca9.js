(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[284],{706:function(e,t,s){Promise.resolve().then(s.bind(s,4502))},4502:function(e,t,s){"use strict";s.r(t);var i=s(7437),n=s(2265),a=s(4086),o=s(994),c=s(3085),r=s(1636),l=s.n(r),d=s(6820),m=s(9150),p=s(3159);let u=(0,o.ZF)({apiKey:"AIzaSyAYlyB4ppiTZJ4PIeCHrg7FRGN9wQDP8n4",authDomain:"harmony-connect-a47ec.firebaseapp.com",projectId:"harmony-connect-a47ec",storageBucket:"harmony-connect-a47ec.appspot.com",messagingSenderId:"998376996522",appId:"1:998376996522:web:19d25511bc569c60d41ad3",measurementId:"G-4QCHFQL992"}),h=(0,a.ad)(u),g=(0,c.v0)(u);t.default=()=>{let[e,t]=(0,n.useState)(""),[s,o]=(0,n.useState)([]),[c,r]=(0,n.useState)(!1),[u,_]=(0,n.useState)([]),[x,y]=(0,n.useState)(""),[C,f]=(0,n.useState)({}),[j,v]=(0,n.useState)({}),[k,b]=(0,n.useState)([]),[N,w]=(0,n.useState)(""),[I,E]=(0,n.useState)(""),[P,S]=(0,n.useState)(""),[O,U]=(0,n.useState)(null),[D,L]=(0,n.useState)({}),[J,A]=(0,n.useState)(0),H={"https://i.pinimg.com/564x/75/d0/09/75d0099d355b411ff8502b8a2eaacb62.jpg":"music","https://i.pinimg.com/564x/dc/4f/21/dc4f21932a6a6453c91585f514f8d73f.jpg":"scenery","https://i.pinimg.com/564x/72/ac/b8/72acb88ce53cb8dc1dee27b0df4d2187.jpg":"forests","https://i.pinimg.com/474x/44/73/61/4473618e46d3ea6074ffea41cc51cc10.jpg":"beach","https://i.pinimg.com/736x/98/c7/cc/98c7cc1060fea49def69449c5d56b485.jpg":"pond","https://i.pinimg.com/736x/60/06/24/60062448e1d64dcfe0650e73eb550a0b.jpg":"train tracks"},T=async()=>{if(e&&N&&P)try{let s=g.currentUser,i=s.uid,n=s.displayName,o=await (0,a.ET)((0,a.hJ)(h,"communities"),{name:e,description:N,creatorId:i,creatorUsername:n,members:[{userId:i,username:n}],imageURL:P});console.log("Community created with ID: ",o.id),t(""),w(""),S(""),U(null)}catch(e){console.error("Error creating community: ",e)}},z=async e=>{try{let t=g.currentUser,s=t.uid,i=t.displayName,n=(0,a.JU)(h,"communities",e);await (0,a.r7)(n,{members:(0,a.vr)({userId:s,username:i})}),console.log("User ".concat(i," joined community ").concat(e))}catch(e){console.error("Error joining community: ",e)}},R=async e=>{try{let t=(0,a.IO)((0,a.hJ)(h,"posts"),(0,a.ar)("communityId","==",e)),s=await (0,a.PL)(t),i=[];s.forEach(e=>{i.push({id:e.id,...e.data()})}),_(i)}catch(e){console.error("Error fetching community posts: ",e)}};(0,n.useEffect)(()=>{let e=async()=>{r(!0);try{let e=(0,a.IO)((0,a.hJ)(h,"communities")),t=await (0,a.PL)(e),s=[];t.forEach(e=>{s.push({id:e.id,...e.data()})}),o(s)}catch(e){console.error("Error fetching communities: ",e)}finally{r(!1)}};e()},[]);let G=e=>{let t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},F=async e=>{try{let t=(0,a.IO)((0,a.hJ)(h,"comments"),(0,a.ar)("postId","==",e)),s=await (0,a.PL)(t),i=[];return s.forEach(e=>{i.push({id:e.id,...e.data()})}),i}catch(e){return console.error("Error fetching comments: ",e),[]}},Q=async(e,t)=>{try{let e=g.currentUser,s=e.uid,i=e.displayName,n=await (0,a.ET)((0,a.hJ)(h,"comments"),{postId:t.text,userId:s,username:i,text:x,timestamp:new Date});console.log("Comment created with ID: ",n.id),y("");let o=await F(t.text);f(e=>({...e,[t.text]:o}))}catch(e){console.error("Error creating comment: ",e)}},B=async e=>{try{let t=g.currentUser,s=t.uid;if(console.log("Liked Posts:",k),k.includes(e)){console.log("Unsuperliking post:",e);let t=(0,a.JU)(h,"posts",e);await (0,a.r7)(t,{superlikesCount:(0,a.nP)(-1)}),b(t=>t.filter(t=>t!==e))}else{console.log("Superliking post:",e);let t=u.find(t=>t.id===e),s=null==t?void 0:t.userEmail;if(!s){console.error("Error: Post creator email not found.");return}let i=(0,a.JU)(h,"posts",e);await (0,a.r7)(i,{superlikesCount:(0,a.nP)(1)});let n=(0,a.IO)((0,a.hJ)(h,"users"),(0,a.ar)("email","==",s)),o=await (0,a.PL)(n);if(o.empty)console.error("Error: User with email ".concat(s," not found."));else{let e=o.docs[0],t=(0,a.JU)(h,"users",e.id);await (0,a.r7)(t,{likesGiven:(0,a.nP)(1),likesReceived:(0,a.nP)(1)})}b(t=>[...t,e])}console.log("User ".concat(s," (un)superliked post ").concat(e))}catch(e){console.error("Error (un)superliking post: ",e)}},M=g.currentUser,Y=null==M?void 0:M.uid;(0,n.useEffect)(()=>{let e=async()=>{let e=(0,a.JU)(h,"users",Y),t=await (0,a.QT)(e),s=t.data();s&&s.likedPosts&&b(s.likedPosts)};e()},[Y]),(0,n.useEffect)(()=>{Y&&fetchLikedPosts()},[Y]);let Z=(e,t)=>{L(s=>({...s,[e]:t}))};return(0,i.jsxs)("div",{className:l().desktop11,children:[(0,i.jsx)("div",{className:l().desktop11Child}),(0,i.jsx)("div",{className:l().createCommunities,children:"create communities"}),(0,i.jsx)("div",{className:l().existingCommunities,children:"existing communities"}),(0,i.jsx)("div",{className:l().orJoin,children:"or join"}),(0,i.jsx)("div",{className:l().desktop11Item}),(0,i.jsx)("div",{className:l().desktop11Inner}),(0,i.jsx)("input",{type:"text",placeholder:"Community Name..",className:l().nameTheCommunity,value:e,onChange:e=>t(e.target.value)}),(0,i.jsx)("textarea",{placeholder:"Community Description (max 200 words)",value:N,className:l().description1,onChange:e=>{let t=e.target.value,s=t.split(/\s+/);s.length<=200&&w(t)},maxLength:900}),(0,i.jsxs)("select",{className:l().selectAnImage,value:P,onChange:e=>{let t=e.target.value;S(t),H.hasOwnProperty(t)?U(H[t]):U(null)},children:[(0,i.jsx)("option",{value:"",children:"Select an image"}),["https://i.pinimg.com/564x/75/d0/09/75d0099d355b411ff8502b8a2eaacb62.jpg","https://i.pinimg.com/564x/dc/4f/21/dc4f21932a6a6453c91585f514f8d73f.jpg","https://i.pinimg.com/564x/72/ac/b8/72acb88ce53cb8dc1dee27b0df4d2187.jpg","https://i.pinimg.com/474x/44/73/61/4473618e46d3ea6074ffea41cc51cc10.jpg","https://i.pinimg.com/736x/98/c7/cc/98c7cc1060fea49def69449c5d56b485.jpg","https://i.pinimg.com/736x/60/06/24/60062448e1d64dcfe0650e73eb550a0b.jpg"].map((e,t)=>(0,i.jsx)("option",{value:e,children:H[e]},t))]}),O&&(0,i.jsx)("img",{className:l().rectangleDiv,src:P,alt:O}),(0,i.jsx)("button",{className:l().createCommunity,onClick:T,children:"Create Community"}),c?(0,i.jsx)("p",{children:"Loading communities..."}):(0,i.jsx)("div",{children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:l().desktop11Child6}),(0,i.jsx)("div",{className:l().desktop11Child7}),(0,i.jsx)("div",{className:l().desktop11Child8}),(0,i.jsx)("div",{className:"".concat(l().div),onClick:()=>{J>0&&A(J-1)}}),(0,i.jsx)("div",{className:l().scrollableList,children:(0,i.jsx)("ul",{children:s.slice(J,J+1).map(e=>(0,i.jsx)("div",{className:l().communityItem,children:(0,i.jsxs)("div",{className:l().communityCard,children:[(0,i.jsx)("div",{className:l().description,children:"description"}),(0,i.jsx)("img",{className:l().desktop11Child1,src:e.imageURL,alt:e.name}),(0,i.jsx)("div",{className:l().name,children:e.name}),(0,i.jsx)("p",{className:l().theDescription,children:e.description}),(0,i.jsxs)("div",{className:l().showPosts,onClick:()=>R(e.id),style:{cursor:"pointer"},children:[(0,i.jsx)(d.A7v,{}),"Show Posts"]}),(0,i.jsxs)("div",{className:l().joinCommunity,onClick:()=>z(e.id),style:{cursor:"pointer"},children:["Join Community",(0,i.jsx)(p.THo,{})]}),(0,i.jsxs)("div",{className:l().communityId,onClick:()=>G(e.id),style:{cursor:"pointer"},children:[(0,i.jsx)(m.AOF,{}),"Copy Community ID"]})]})},e.id))})}),(0,i.jsx)("div",{style:{cursor:"pointer"},onClick:()=>{J+1<s.length&&A(J+1)},className:l().div1})]})}),u.length>0&&(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:l().desktop11Child2,style:{maxHeight:"1000px",overflowY:"scroll"},children:(0,i.jsx)("ul",{children:u.map((e,t)=>(0,i.jsx)("div",{children:(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:"////////////////////////newpost////////////////////////"}),(0,i.jsxs)("p",{children:["post by:",e.userEmail]}),(0,i.jsxs)("p",{className:l().genre,children:["Genre: ",e.genre]}),(0,i.jsxs)("p",{children:["Caption: ",e.caption]}),(0,i.jsx)("button",{className:l().scan2listen,onClick:()=>Z(e.id,e.text),children:"scan2listen"}),D[e.id]&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{children:"qr code data"}),(0,i.jsx)("p",{children:D[e.id]})]}),(0,i.jsxs)("p",{children:["Timestamp:"," ",new Date(1e3*e.timestamp.seconds).toLocaleString()]}),(0,i.jsx)("img",{className:l().desktop11Child3,src:e.downloadURL,alt:"Post Image"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{className:l().submitComment,type:"text",placeholder:"Enter your comment",value:x,onChange:e=>y(e.target.value)}),(0,i.jsx)("button",{className:l().submitComment1,onClick:()=>Q(e.text,e),children:"Submit Comment"})]}),(0,i.jsx)("button",{onClick:()=>B(e.id),children:k.includes(e.id)?"Unsuperlike":"Superlike"})]})},t))})})})]})}},1636:function(e){e.exports={desktop11Child:"page_desktop11Child__DdCep",createCommunities:"page_createCommunities__oXd5D",existingCommunities:"page_existingCommunities__kGsUp",desktop11Item:"page_desktop11Item__EEf3e",orJoin:"page_orJoin__Or8Yq",description:"page_description__yS1rN",theDescription:"page_theDescription___ORjI",desktop11Inner:"page_desktop11Inner__EIo_y",description1:"page_description1__wIfgg",nameTheCommunity:"page_nameTheCommunity__4WxfK",desktop11Child1:"page_desktop11Child1__by3Rz",rectangleDiv:"page_rectangleDiv__dbZMf",name:"page_name__2HH4k",desktop11Child2:"page_desktop11Child2__I_Drp",desktop11Child3:"page_desktop11Child3__gRe_5",gmail:"page_gmail__D0Uxu",showPosts:"page_showPosts__xuyMt",desktop11Child7:"page_desktop11Child7__clxZ3",caption:"page_caption__b4kr6",genre:"page_genre__KlkuT",like:"page_like__tBszr",scan2listen:"page_scan2listen__c_QaN",timestamp:"page_timestamp___HxFd",desktop11Child4:"page_desktop11Child4__XHGgl",desktop11Child5:"page_desktop11Child5__AEhta",createCommunity:"page_createCommunity__BKJ_L",selectAnImage:"page_selectAnImage__EfCvn",submitComment:"page_submitComment__WkUS_",submitComment1:"page_submitComment1__6bQCr",desktop11:"page_desktop11__BYCoA",communityContainer:"page_communityContainer__Mfztn",scrollableList:"page_scrollableList__fX5HW",communityList:"page_communityList__zIjGF",communityItem:"page_communityItem__ErRCX",desktop11Child6:"page_desktop11Child6__2i0vm",desktop11Child8:"page_desktop11Child8__cgm4Z",communityId:"page_communityId__D9kkM",joinCommunity:"page_joinCommunity__VMH7g",div:"page_div___A7Yp",div1:"page_div1__4m13q"}},1172:function(e,t,s){"use strict";s.d(t,{w_:function(){return r}});var i=s(2265),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=i.createContext&&i.createContext(n),o=function(){return(o=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++)for(var n in t=arguments[s])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},c=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(s[i[n]]=e[i[n]]);return s};function r(e){return function(t){return i.createElement(l,o({attr:o({},e.attr)},t),function e(t){return t&&t.map(function(t,s){return i.createElement(t.tag,o({key:s},t.attr),e(t.child))})}(e.child))}}function l(e){var t=function(t){var s,n=e.attr,a=e.size,r=e.title,l=c(e,["attr","size","title"]),d=a||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),i.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,l,{className:s,style:o(o({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),r&&i.createElement("title",null,r),e.children)};return void 0!==a?i.createElement(a.Consumer,null,function(e){return t(e)}):t(n)}}},function(e){e.O(0,[358,214,712,420,115,647,971,596,744],function(){return e(e.s=706)}),_N_E=e.O()}]);