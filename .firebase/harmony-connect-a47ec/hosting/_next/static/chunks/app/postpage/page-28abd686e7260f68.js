(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[375],{6566:function(e,t,o){Promise.resolve().then(o.bind(o,6206))},6206:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return Y}});var n,r,s,i=o(7437),l=o(2265),a=Object.defineProperty,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,h=(e,t,o)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,m=(e,t)=>{for(var o in t||(t={}))d.call(t,o)&&h(e,o,t[o]);if(c)for(var o of c(t))u.call(t,o)&&h(e,o,t[o]);return e},f=(e,t)=>{var o={};for(var n in e)d.call(e,n)&&0>t.indexOf(n)&&(o[n]=e[n]);if(null!=e&&c)for(var n of c(e))0>t.indexOf(n)&&u.call(e,n)&&(o[n]=e[n]);return o};(e=>{let t=class{constructor(e,o,n,s){if(this.version=e,this.errorCorrectionLevel=o,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw RangeError("Version value out of range");if(s<-1||s>7)throw RangeError("Mask value out of range");this.size=4*e+17;let i=[];for(let e=0;e<this.size;e++)i.push(!1);for(let e=0;e<this.size;e++)this.modules.push(i.slice()),this.isFunction.push(i.slice());this.drawFunctionPatterns();let l=this.addEccAndInterleave(n);if(this.drawCodewords(l),-1==s){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);let o=this.getPenaltyScore();o<e&&(s=t,e=o),this.applyMask(t)}}r(0<=s&&s<=7),this.mask=s,this.applyMask(s),this.drawFormatBits(s),this.isFunction=[]}static encodeText(o,n){let r=e.QrSegment.makeSegments(o);return t.encodeSegments(r,n)}static encodeBinary(o,n){let r=e.QrSegment.makeBytes(o);return t.encodeSegments([r],n)}static encodeSegments(e,n,s=1,l=40,a=-1,c=!0){let d,u;if(!(t.MIN_VERSION<=s&&s<=l&&l<=t.MAX_VERSION)||a<-1||a>7)throw RangeError("Invalid value");for(d=s;;d++){let o=8*t.getNumDataCodewords(d,n),r=i.getTotalBits(e,d);if(r<=o){u=r;break}if(d>=l)throw RangeError("Data too long")}for(let e of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])c&&u<=8*t.getNumDataCodewords(d,e)&&(n=e);let h=[];for(let t of e)for(let e of(o(t.mode.modeBits,4,h),o(t.numChars,t.mode.numCharCountBits(d),h),t.getData()))h.push(e);r(h.length==u);let m=8*t.getNumDataCodewords(d,n);r(h.length<=m),o(0,Math.min(4,m-h.length),h),o(0,(8-h.length%8)%8,h),r(h.length%8==0);for(let e=236;h.length<m;e^=253)o(e,8,h);let f=[];for(;8*f.length<h.length;)f.push(0);return h.forEach((e,t)=>f[t>>>3]|=e<<7-(7&t)),new t(d,n,f,a)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let e=this.getAlignmentPatternPositions(),t=e.length;for(let o=0;o<t;o++)for(let n=0;n<t;n++)0==o&&0==n||0==o&&n==t-1||o==t-1&&0==n||this.drawAlignmentPattern(e[o],e[n]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){let t=this.errorCorrectionLevel.formatBits<<3|e,o=t;for(let e=0;e<10;e++)o=o<<1^(o>>>9)*1335;let s=(t<<10|o)^21522;r(s>>>15==0);for(let e=0;e<=5;e++)this.setFunctionModule(8,e,n(s,e));this.setFunctionModule(8,7,n(s,6)),this.setFunctionModule(8,8,n(s,7)),this.setFunctionModule(7,8,n(s,8));for(let e=9;e<15;e++)this.setFunctionModule(14-e,8,n(s,e));for(let e=0;e<8;e++)this.setFunctionModule(this.size-1-e,8,n(s,e));for(let e=8;e<15;e++)this.setFunctionModule(8,this.size-15+e,n(s,e));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let t=0;t<12;t++)e=e<<1^(e>>>11)*7973;let t=this.version<<12|e;r(t>>>18==0);for(let e=0;e<18;e++){let o=n(t,e),r=this.size-11+e%3,s=Math.floor(e/3);this.setFunctionModule(r,s,o),this.setFunctionModule(s,r,o)}}drawFinderPattern(e,t){for(let o=-4;o<=4;o++)for(let n=-4;n<=4;n++){let r=Math.max(Math.abs(n),Math.abs(o)),s=e+n,i=t+o;0<=s&&s<this.size&&0<=i&&i<this.size&&this.setFunctionModule(s,i,2!=r&&4!=r)}}drawAlignmentPattern(e,t){for(let o=-2;o<=2;o++)for(let n=-2;n<=2;n++)this.setFunctionModule(e+n,t+o,1!=Math.max(Math.abs(n),Math.abs(o)))}setFunctionModule(e,t,o){this.modules[t][e]=o,this.isFunction[t][e]=!0}addEccAndInterleave(e){let o=this.version,n=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(o,n))throw RangeError("Invalid argument");let s=t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][o],i=t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][o],l=Math.floor(t.getNumRawDataModules(o)/8),a=s-l%s,c=Math.floor(l/s),d=[],u=t.reedSolomonComputeDivisor(i);for(let o=0,n=0;o<s;o++){let r=e.slice(n,n+c-i+(o<a?0:1));n+=r.length;let s=t.reedSolomonComputeRemainder(r,u);o<a&&r.push(0),d.push(r.concat(s))}let h=[];for(let e=0;e<d[0].length;e++)d.forEach((t,o)=>{(e!=c-i||o>=a)&&h.push(t[e])});return r(h.length==l),h}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw RangeError("Invalid argument");let o=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let r=0;r<this.size;r++)for(let s=0;s<2;s++){let i=t-s,l=(t+1&2)==0,a=l?this.size-1-r:r;!this.isFunction[a][i]&&o<8*e.length&&(this.modules[a][i]=n(e[o>>>3],7-(7&o)),o++)}}r(o==8*e.length)}applyMask(e){if(e<0||e>7)throw RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let o=0;o<this.size;o++){let n;switch(e){case 0:n=(o+t)%2==0;break;case 1:n=t%2==0;break;case 2:n=o%3==0;break;case 3:n=(o+t)%3==0;break;case 4:n=(Math.floor(o/3)+Math.floor(t/2))%2==0;break;case 5:n=o*t%2+o*t%3==0;break;case 6:n=(o*t%2+o*t%3)%2==0;break;case 7:n=((o+t)%2+o*t%3)%2==0;break;default:throw Error("Unreachable")}!this.isFunction[t][o]&&n&&(this.modules[t][o]=!this.modules[t][o])}}getPenaltyScore(){let e=0;for(let o=0;o<this.size;o++){let n=!1,r=0,s=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[o][i]==n?5==++r?e+=t.PENALTY_N1:r>5&&e++:(this.finderPenaltyAddHistory(r,s),n||(e+=this.finderPenaltyCountPatterns(s)*t.PENALTY_N3),n=this.modules[o][i],r=1);e+=this.finderPenaltyTerminateAndCount(n,r,s)*t.PENALTY_N3}for(let o=0;o<this.size;o++){let n=!1,r=0,s=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[i][o]==n?5==++r?e+=t.PENALTY_N1:r>5&&e++:(this.finderPenaltyAddHistory(r,s),n||(e+=this.finderPenaltyCountPatterns(s)*t.PENALTY_N3),n=this.modules[i][o],r=1);e+=this.finderPenaltyTerminateAndCount(n,r,s)*t.PENALTY_N3}for(let o=0;o<this.size-1;o++)for(let n=0;n<this.size-1;n++){let r=this.modules[o][n];r==this.modules[o][n+1]&&r==this.modules[o+1][n]&&r==this.modules[o+1][n+1]&&(e+=t.PENALTY_N2)}let o=0;for(let e of this.modules)o=e.reduce((e,t)=>e+(t?1:0),o);let n=this.size*this.size,s=Math.ceil(Math.abs(20*o-10*n)/n)-1;return r(0<=s&&s<=9),r(0<=(e+=s*t.PENALTY_N4)&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{let e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2)),o=[6];for(let n=this.size-7;o.length<e;n-=t)o.splice(1,0,n);return o}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw RangeError("Version number out of range");let o=(16*e+128)*e+64;if(e>=2){let t=Math.floor(e/7)+2;o-=(25*t-10)*t-55,e>=7&&(o-=36)}return r(208<=o&&o<=29648),o}static getNumDataCodewords(e,o){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[o.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[o.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw RangeError("Degree out of range");let o=[];for(let t=0;t<e-1;t++)o.push(0);o.push(1);let n=1;for(let r=0;r<e;r++){for(let e=0;e<o.length;e++)o[e]=t.reedSolomonMultiply(o[e],n),e+1<o.length&&(o[e]^=o[e+1]);n=t.reedSolomonMultiply(n,2)}return o}static reedSolomonComputeRemainder(e,o){let n=o.map(e=>0);for(let r of e){let e=r^n.shift();n.push(0),o.forEach((o,r)=>n[r]^=t.reedSolomonMultiply(o,e))}return n}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw RangeError("Byte out of range");let o=0;for(let n=7;n>=0;n--)o=o<<1^(o>>>7)*285^(t>>>n&1)*e;return r(o>>>8==0),o}finderPenaltyCountPatterns(e){let t=e[1];r(t<=3*this.size);let o=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(o&&e[0]>=4*t&&e[6]>=t?1:0)+(o&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,o){return e&&(this.finderPenaltyAddHistory(t,o),t=0),t+=this.size,this.finderPenaltyAddHistory(t,o),this.finderPenaltyCountPatterns(o)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};function o(e,t,o){if(t<0||t>31||e>>>t!=0)throw RangeError("Value out of range");for(let n=t-1;n>=0;n--)o.push(e>>>n&1)}function n(e,t){return(e>>>t&1)!=0}function r(e){if(!e)throw Error("Assertion error")}t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;let s=class{constructor(e,t,o){if(this.mode=e,this.numChars=t,this.bitData=o,t<0)throw RangeError("Invalid argument");this.bitData=o.slice()}static makeBytes(e){let t=[];for(let n of e)o(n,8,t);return new s(s.Mode.BYTE,e.length,t)}static makeNumeric(e){if(!s.isNumeric(e))throw RangeError("String contains non-numeric characters");let t=[];for(let n=0;n<e.length;){let r=Math.min(e.length-n,3);o(parseInt(e.substr(n,r),10),3*r+1,t),n+=r}return new s(s.Mode.NUMERIC,e.length,t)}static makeAlphanumeric(e){let t;if(!s.isAlphanumeric(e))throw RangeError("String contains unencodable characters in alphanumeric mode");let n=[];for(t=0;t+2<=e.length;t+=2){let r=45*s.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t));o(r+=s.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t+1)),11,n)}return t<e.length&&o(s.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t)),6,n),new s(s.Mode.ALPHANUMERIC,e.length,n)}static makeSegments(e){return""==e?[]:s.isNumeric(e)?[s.makeNumeric(e)]:s.isAlphanumeric(e)?[s.makeAlphanumeric(e)]:[s.makeBytes(s.toUtf8ByteArray(e))]}static makeEci(e){let t=[];if(e<0)throw RangeError("ECI assignment value out of range");if(e<128)o(e,8,t);else if(e<16384)o(2,2,t),o(e,14,t);else if(e<1e6)o(6,3,t),o(e,21,t);else throw RangeError("ECI assignment value out of range");return new s(s.Mode.ECI,0,t)}static isNumeric(e){return s.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return s.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let o=0;for(let n of e){let e=n.mode.numCharCountBits(t);if(n.numChars>=1<<e)return 1/0;o+=4+e+n.bitData.length}return o}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let o=0;o<e.length;o++)"%"!=e.charAt(o)?t.push(e.charCodeAt(o)):(t.push(parseInt(e.substr(o+1,2),16)),o+=2);return t}},i=s;i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=i})(s||(s={})),(e=>{let t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})((n=s||(s={})).QrCode||(n.QrCode={})),(e=>{let t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})((r=s||(s={})).QrSegment||(r.QrSegment={}));var p=s,g={L:p.QrCode.Ecc.LOW,M:p.QrCode.Ecc.MEDIUM,Q:p.QrCode.Ecc.QUARTILE,H:p.QrCode.Ecc.HIGH},C="#FFFFFF",E="#000000";function _(e,t=0){let o=[];return e.forEach(function(e,n){let r=null;e.forEach(function(s,i){if(!s&&null!==r){o.push(`M${r+t} ${n+t}h${i-r}v1H${r+t}z`),r=null;return}if(i===e.length-1){if(!s)return;null===r?o.push(`M${i+t},${n+t} h1v1H${i+t}z`):o.push(`M${r+t},${n+t} h${i+1-r}v1H${r+t}z`);return}s&&null===r&&(r=i)})}),o.join("")}function y(e,t){return e.slice().map((e,o)=>o<t.y||o>=t.y+t.h?e:e.map((e,o)=>(o<t.x||o>=t.x+t.w)&&e))}function w(e,t,o,n){if(null==n)return null;let r=e.length+2*(o?4:0),s=Math.floor(.1*t),i=r/t,l=(n.width||s)*i,a=(n.height||s)*i,c=null==n.x?e.length/2-l/2:n.x*i,d=null==n.y?e.length/2-a/2:n.y*i,u=null;if(n.excavate){let e=Math.floor(c),t=Math.floor(d);u={x:e,y:t,w:Math.ceil(l+c-e),h:Math.ceil(a+d-t)}}return{x:c,y:d,h:a,w:l,excavation:u}}var x=function(){try{new Path2D().addPath(new Path2D)}catch(e){return!1}return!0}();function N(e){let{value:t,size:o=128,level:n="L",bgColor:r=C,fgColor:s=E,includeMargin:i=!1,style:a,imageSettings:c}=e,d=f(e,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),u=null==c?void 0:c.src,h=(0,l.useRef)(null),N=(0,l.useRef)(null),[M,v]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(null!=h.current){let e=h.current,l=e.getContext("2d");if(!l)return;let a=p.QrCode.encodeText(t,g[n]).getModules(),d=i?4:0,u=a.length+2*d,m=w(a,o,i,c),f=N.current,C=null!=m&&null!==f&&f.complete&&0!==f.naturalHeight&&0!==f.naturalWidth;C&&null!=m.excavation&&(a=y(a,m.excavation));let E=window.devicePixelRatio||1;e.height=e.width=o*E;let M=o/u*E;l.scale(M,M),l.fillStyle=r,l.fillRect(0,0,u,u),l.fillStyle=s,x?l.fill(new Path2D(_(a,d))):a.forEach(function(e,t){e.forEach(function(e,o){e&&l.fillRect(o+d,t+d,1,1)})}),C&&l.drawImage(f,m.x+d,m.y+d,m.w,m.h)}}),(0,l.useEffect)(()=>{v(!1)},[u]);let R=m({height:o,width:o},a),I=null;return null!=u&&(I=l.createElement("img",{src:u,key:u,style:{display:"none"},onLoad:()=>{v(!0)},ref:N})),l.createElement(l.Fragment,null,l.createElement("canvas",m({style:R,height:o,width:o,ref:h},d)),I)}function M(e){let{value:t,size:o=128,level:n="L",bgColor:r=C,fgColor:s=E,includeMargin:i=!1,imageSettings:a}=e,c=f(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]),d=p.QrCode.encodeText(t,g[n]).getModules(),u=i?4:0,h=d.length+2*u,x=w(d,o,i,a),N=null;null!=a&&null!=x&&(null!=x.excavation&&(d=y(d,x.excavation)),N=l.createElement("image",{xlinkHref:a.src,height:x.h,width:x.w,x:x.x+u,y:x.y+u,preserveAspectRatio:"none"}));let M=_(d,u);return l.createElement("svg",m({height:o,width:o,viewBox:`0 0 ${h} ${h}`},c),l.createElement("path",{fill:r,d:`M0,0 h${h}v${h}H0z`,shapeRendering:"crispEdges"}),l.createElement("path",{fill:s,d:M,shapeRendering:"crispEdges"}),N)}var v=e=>{let{renderAs:t}=e,o=f(e,["renderAs"]);return"svg"===t?l.createElement(M,m({},o)):l.createElement(N,m({},o))},R=o(2692),I=o.n(R),S=o(4086),A=o(994),P=o(3085),k=o(9584),b=o(9150),j=o(8910),z=o(7259),O=o.n(z);let F=(0,A.ZF)({apiKey:"AIzaSyAYlyB4ppiTZJ4PIeCHrg7FRGN9wQDP8n4",authDomain:"harmony-connect-a47ec.firebaseapp.com",projectId:"harmony-connect-a47ec",storageBucket:"harmony-connect-a47ec.appspot.com",messagingSenderId:"998376996522",appId:"1:998376996522:web:19d25511bc569c60d41ad3",measurementId:"G-4QCHFQL992"}),L=(0,S.ad)(F),T=(0,k.cF)(F),D=(0,P.v0)(F),U=["Rock","Pop","Hip Hop","R&B","Country","Jazz","Electronic","Classical"];var Q=function(){let[e,t]=(0,l.useState)(0),[o,n]=(0,l.useState)(0),[r,s]=(0,l.useState)([]),[a,c]=(0,l.useState)(""),[d,u]=(0,l.useState)(""),[h,m]=(0,l.useState)(""),[f,p]=(0,l.useState)([]),[g,C]=(0,l.useState)(!1),[E,_]=(0,l.useState)(""),[y,w]=(0,l.useState)(""),[x,N]=(0,l.useState)([]),[M,R]=(0,l.useState)(null),[A,z]=(0,l.useState)(""),[F,Q]=(0,l.useState)(""),B=D.currentUser?D.currentUser.uid:null,[H,G]=(0,l.useState)(""),[Y,$]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=(0,P.Aj)(D,e=>{e&&(e.email,e.uid)});return()=>e()},[]);let q=async()=>{try{let e=await I()(document.getElementById("qrcode-container")),t=e.toDataURL("image/png");R(t)}catch(e){console.error("Error generating QR Code image:",e)}},J=async()=>{try{await (0,S.ET)((0,S.hJ)(L,"captions"),{text:d,likeCount:e,commentCount:o,downloadURL:A,genre:h,timestamp:(0,S.Bt)(),caption:F}),console.log("Caption added.")}catch(e){console.error("Error adding caption:",e)}},V=async()=>{if(M){let e=(0,k.iH)(T,"qr-codes/".concat(d,".png"));try{await (0,k.sf)(e,M,"data_url");let t=await (0,k.Jt)(e);z(t);let o=await (0,S.ET)((0,S.hJ)(L,"qrcodes"),{url:t,timestamp:(0,S.Bt)(),text:d});console.log("QR Code image uploaded to Firebase Storage and added to Firestore with ID:",o.id)}catch(e){console.error("Error uploading QR Code image to Firebase Storage:",e)}}};(0,l.useEffect)(()=>{y?q():R(null)},[y]),(0,l.useEffect)(()=>{(async function(){try{let e=(0,S.hJ)(L,"qrcodes"),t=await (0,S.PL)(e),o=[];t.forEach(e=>{let t=e.data();o.push(t.text)}),console.log("QR Code texts retrieved:",o),N(o)}catch(e){console.error("Error fetching QR Code texts:",e)}})()},[L]);let X=async()=>{try{if(""===Y.trim())return;if(!B){console.error("User not authenticated.");return}let t=D.currentUser,n=t?t.email:null;await (0,S.ET)((0,S.hJ)(L,"posts"),{text:Y,likeCount:e,commentCount:o,downloadURL:A,userId:B,userEmail:n,genre:h,caption:F,communityId:H,timestamp:(0,S.Bt)()}),console.log("Post written.")}catch(e){console.error("Error adding post:",e)}};(0,l.useEffect)(()=>{let e=(0,S.IO)((0,S.hJ)(L,"comments"),(0,S.ar)("postId","==",d),(0,S.Xo)("timestamp")),t=(0,S.cf)(e,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),s(t)});return()=>t()},[d]);let K=async()=>{try{if(""===a.trim())return;let e=await (0,S.ET)((0,S.hJ)(L,"comments"),{text:a,postId:d,userId:B,timestamp:(0,S.Bt)()});n(o+1),s([...r,{text:a,id:e.id}]),c("")}catch(e){console.error("Error adding comment:",e)}},W=async()=>{try{let e=window.confirm("Are you sure you want to delete this post?");if(e){let e=(0,S.IO)((0,S.hJ)(L,"posts")),t=await (0,S.PL)(e),o=t.docs.find(e=>e.data().text===d);if(o){let e=(0,S.JU)(L,"posts",o.id);await (0,S.oe)(e),console.log("Post deleted successfully.")}else console.error("No matching document found for text:",d)}}catch(e){console.error("Error deleting post:",e)}};(0,l.useEffect)(()=>{!async function(){try{let e=(0,S.JU)(L,"posts",d),o=await (0,S.QT)(e);if(o.exists()){let e=o.data();if(e){t(e.likeCount||0);let o=D.currentUser;o&&C(e.likes&&e.likes[o.uid])}}}catch(e){console.error("Error fetching like data:",e)}}()},[d]);let Z=async e=>{try{let t=window.confirm("Are you sure you want to delete this comment?");if(t){let t=(0,S.JU)(L,"comments",e);await (0,S.oe)(t),s(r.filter(t=>t.id!==e)),n(o-1),console.log("Comment deleted successfully.")}}catch(e){console.error("Error deleting comment:",e)}};return(0,l.useEffect)(()=>{let e=async()=>{try{if(""!==d.trim()){console.log("Deleting post with ID:",d);let e=(0,S.JU)(L,"posts",d),t=await (0,S.QT)(e);t.exists()?(await (0,S.oe)(e),console.log("Post deleted successfully.")):console.error("Document does not exist:",d)}else console.log("qrCodeText is empty. No post deleted.");let e=(0,S.IO)((0,S.hJ)(L,"posts")),t=(0,S.cf)(e,e=>{let t=[];e.forEach(e=>{let o=e.data();o&&e.id&&t.push({...o,id:e.id})}),p(t),console.log("Posts updated:",t)});return()=>{t(),console.log("Firestore listener unsubscribed.")}}catch(e){console.error("Error deleting or fetching posts:",e)}};e()},[L,d]),(0,i.jsxs)("div",{className:O().desktop9,children:[(0,i.jsx)("div",{className:O().desktop9Item}),(0,i.jsx)("div",{className:"post-header"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:O().desktop9Child2}),(0,i.jsx)("input",{type:"text",placeholder:"Community ID",value:H,onChange:e=>{G(e.target.value)},style:{border:"none",outline:"none",fontSize:"18px"},className:O().enterTheCommunity})]}),(0,i.jsxs)("div",{className:"post-content",children:[(0,i.jsxs)("div",{className:"qr-code-generator",children:[(0,i.jsx)("div",{className:O().desktop9Child5}),(0,i.jsx)("input",{type:"text",placeholder:"Text for QR code..",value:E,onChange:e=>{_(e.target.value)},className:O().enterQrCode,style:{border:"none",outline:"none",fontSize:"18px"}}),(0,i.jsx)("button",{className:O().createQrCode,onClick:()=>{w(E),u(E),$(E)},children:"Generate QR Code"}),d&&(0,i.jsx)(v,{className:O().qrcode1Icon,value:d})]}),(0,i.jsx)("div",{className:O().desktop9Child1}),(0,i.jsxs)("select",{className:O().selectAGenre,style:{border:"none",outline:"none",fontSize:"18px"},value:h,onChange:e=>m(e.target.value),children:[(0,i.jsx)("option",{value:"",disabled:!0,children:"Select a genre"}),U.map((e,t)=>(0,i.jsx)("option",{value:e,children:e},t))]})]}),(0,i.jsxs)("div",{className:"post-actions",children:[(0,i.jsx)("div",{className:O().rectangleDiv}),(0,i.jsx)("input",{className:O().captionIsGoing,type:"text",placeholder:"Add a caption...",value:F,onChange:e=>Q(e.target.value),style:{border:"none",outline:"none",fontSize:"18px"}}),(0,i.jsx)("div",{className:O().desktop9Inner}),(0,i.jsx)("button",{className:O().uploadCaptions,onClick:J,style:{fontSize:"24px",outline:"none",border:"none"},children:(0,i.jsx)(b.bzc,{})}),(0,i.jsx)("div",{className:O().desktop9Child4}),(0,i.jsx)("button",{className:O().wannaPostIt,style:{border:"none",outline:"none",fontSize:"18px"},onClick:X,children:"wannaPostIt?"}),(0,i.jsx)("p",{className:O().orchangedyourmind,children:"or changed your mind so delete it?"}),(0,i.jsx)("button",{className:O().delete,onClick:W,children:(0,i.jsx)(j.ZkW,{})}),y&&(0,i.jsx)("div",{id:"qrcode-container",className:O().qrcode1Icon,style:{width:"290px"},children:(0,i.jsx)(v,{value:y,size:250})}),M&&(0,i.jsx)("div",{children:(0,i.jsx)("button",{className:O().uploadQrCode,onClick:V,children:"Confirm"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:O().comment12comment2,children:(0,i.jsx)("ul",{className:O().commentsList,children:r.map((e,t)=>(0,i.jsxs)("li",{className:O().comment1,children:[(0,i.jsx)("span",{children:e.text}),(0,i.jsx)("button",{style:{fontSize:"20px",outline:"none",border:"none"},onClick:()=>Z(e.id),children:(0,i.jsx)(b.VPh,{})})]},t))})}),(0,i.jsx)("div",{className:O().desktop9Child3}),(0,i.jsx)("input",{type:"text",placeholder:"Add a comment...",style:{border:"none",outline:"none",fontSize:"18px"},className:O().commentSomething,value:a,onChange:e=>c(e.target.value),onKeyUp:e=>{"Enter"===e.key&&K()}})]})]})]})},B=o(1396),H=o.n(B),G=function(){let[e,t]=(0,l.useState)(!1);return(0,i.jsxs)("div",{className:O().postlist,children:[(0,i.jsx)("div",{className:O().whitebox}),(0,i.jsx)("button",{style:{fontSize:"24px",outline:"none",border:"none",marginRight:"35px",textDecoration:"none"},className:O().cc,children:(0,i.jsxs)(H(),{href:"/yourpage",children:["profile ",(0,i.jsx)(b.YwC,{})]})}),(0,i.jsx)("button",{className:O().pp,style:{fontSize:"24px",outline:"none",border:"none"},onClick:()=>{t(!e)},children:e?(0,i.jsxs)("span",{children:["Close Post ",(0,i.jsx)(b.oHP,{})]}):(0,i.jsxs)("span",{children:["Create Post ",(0,i.jsx)(b.Lfi,{})]})}),e&&(0,i.jsx)(Q,{postId:1})]})},Y=function(){return(0,i.jsx)("div",{className:"app",children:(0,i.jsx)(G,{})})}},7259:function(e){e.exports={desktop9Child:"page_desktop9Child__UIfUN",desktop9Item:"page_desktop9Item__ASmdV",uploadQrCode:"page_uploadQrCode__uhn3f",desktop9Inner:"page_desktop9Inner__8d19q",createQrCode:"page_createQrCode__S_HYX",qrCodeIs:"page_qrCodeIs__qhfIh",rectangleDiv:"page_rectangleDiv__U2PFo",captionIsGoing:"page_captionIsGoing__69_B4",uploadCaptions:"page_uploadCaptions__GOak0",desktop9Child1:"page_desktop9Child1__8OUA3",selectAGenre:"page_selectAGenre__X7K__",desktop9Child2:"page_desktop9Child2__H75yl",enterTheCommunity:"page_enterTheCommunity__rFIk5",desktop9Child3:"page_desktop9Child3__mZsJb",commentSomething:"page_commentSomething__ZEtLM",comment1:"page_comment1__k2UlM",comment12comment2:"page_comment12comment2__qPNMU",desktop9Child4:"page_desktop9Child4___OqWg",wannaPostIt:"page_wannaPostIt__dyGjL",desktop9:"page_desktop9__oQmOO",qrcode1Icon:"page_qrcode1Icon__wa6ZA",desktop9Child5:"page_desktop9Child5__F4zvI",enterQrCode:"page_enterQrCode__yGh9P",orchangedyourmind:"page_orchangedyourmind__xISWv",delete:"page_delete__bfYeQ",postlist:"page_postlist__RqbN6",pp:"page_pp__vF6Zd",cc:"page_cc__NjM45",rectangleyellow:"page_rectangleyellow__mUF__"}}},function(e){e.O(0,[358,214,712,582,337,647,396,678,971,596,744],function(){return e(e.s=6566)}),_N_E=e.O()}]);